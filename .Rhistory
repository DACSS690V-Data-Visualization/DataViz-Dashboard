# Check the structure of the object
str(FinalbostonZips)
# Ensure the object is a valid `sf` object
class(FinalbostonZips)
# Convert the geometry to WKT format (string)
# If you renamed the geometry column, update it as follows:
st_geometry(FinalbostonZips) <- "new_geometry_column"
# Check the structure of the object
str(FinalbostonZips)
# Ensure the object is a valid `sf` object
class(FinalbostonZips)
# If geometry is missing, reassign it
st_geometry(FinalbostonZips) <- "geometry"
head(FinalbostonZips)
view(FinalbostonZips)
#Filtering down to only columns needed for visualizations
FinalbostonZips <- Updated_bostonZips |>
select(
ZIP5,
geometry,
Shape_Length,
Shape_Area,
Check,
`Credit Card`,
Average,
Rate,
Proportion,
TotalAllTypes,
CreditCardPctOfTotal,
CheckPctOfTotal )
#making sure the data updated correctly
head(FinalbostonZips)
#Now to remove NA values for cleaner viz
FinalbostonZips <- FinalbostonZips|>
filter(!is.na(Check))
#viewing the newly clean data
# Convert the geometry to WKT format (string)
# If you renamed the geometry column, update it as follows:
st_geometry(FinalbostonZips) <- "new_geometry_column"
st_geometry(FinalbostonZips) <- "geometry"
view(FinalbostonZips)
##Plotting -------------------------------------------------------------
#plotting a choropleth with the average in contributions
ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
# save del3Draft ----------------------------------------------------------
#Making an interactive map
del3Draft <- tm_shape(FinalbostonZips) +
tm_polygons("Average", palette = "plasma", title = "The Average") +
tm_view(set.view = c(-71.0589, 42.3601, 10)) +
tm_layout(
main.title = "A Map of Average Political Contributions in Boston by Zip Codes",
main.title.size = 1.3,
main.title.position = "center",
title = "For Payment made by Credit Cards & Checks",
title.size = 1,
title.position = c("left", "bottom"),
legend.outside = TRUE,
legend.title.size = 1,
legend.text.size = 0.75 )
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
# deliverable 4  ----------------------------------------------------------
#creating a choropleth map
Cggplot_map <- function(data, var, title, subtitle) {
ggplot(data) +
geom_sf(aes(fill = !!sym(var)), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(title = title,
subtitle = subtitle,
fill = paste(var, "Contributions"),
caption = "Data source: Massachusetts Office of Campaign and Political Finance") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))}
#creating the second interactive map
Ctmap_interactive <- function(data, var, title) {
tm_shape(data) +
tm_polygons(var, palette = "plasma", title = title, alpha = 0.5) -> tmap_chorop
leaflet_map <- tmap_leaflet(tmap_chorop)
leaflet_map |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = data, fillOpacity = 0.5, color = "blue", weight = 1)}
#For credit cards
Cggplot_map(FinalbostonZips, "Credit Card",
"Total Credit Card Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Credit Card", "Credit Card Contributions")
#For checks
Cggplot_map(FinalbostonZips, "Check",
"Total Check Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Check", "Check Contributions")
#Layering and combining maps
leaflet_map2 <- tmap_leaflet(tm_shape(FinalbostonZips) +
tm_polygons("Credit Card", palette = "plasma", title = "Contributions", alpha = 0.5))
leaflet_map2 |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "blue", weight = 1, group = "Credit Card") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "red", weight = 1, group = "Check") |>
addLayersControl(
overlayGroups = c("Credit Card", "Check"),
options = layersControlOptions(collapsed = FALSE)
)
# save del4Draft ----------------------------------------------------------
saveRDS(leaflet_map2, "del4Draft.rds")
saveWidget(leaflet_map2, "del4Draft.html")
FinalbostonZips <- Updated_bostonZips |>
select(
ZIP5,
geometry,
Check,
`Credit Card`,
Average,
Rate,
Proportion,
TotalAllTypes,
CreditCardPctOfTotal,
CheckPctOfTotal )
#making sure the data updated correctly
head(FinalbostonZips)
#Now to remove NA values for cleaner viz
FinalbostonZips <- FinalbostonZips|>
filter(!is.na(Check))
#viewing the newly clean data
# Convert the geometry to WKT format (string)
# If you renamed the geometry column, update it as follows:
st_geometry(FinalbostonZips) <- "new_geometry_column"
st_geometry(FinalbostonZips) <- "geometry"
view(FinalbostonZips)
##Plotting -------------------------------------------------------------
#plotting a choropleth with the average in contributions
ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
# save del3Draft ----------------------------------------------------------
#Making an interactive map
del3Draft <- tm_shape(FinalbostonZips) +
tm_polygons("Average", palette = "plasma", title = "The Average") +
tm_view(set.view = c(-71.0589, 42.3601, 10)) +
tm_layout(
main.title = "A Map of Average Political Contributions in Boston by Zip Codes",
main.title.size = 1.3,
main.title.position = "center",
title = "For Payment made by Credit Cards & Checks",
title.size = 1,
title.position = c("left", "bottom"),
legend.outside = TRUE,
legend.title.size = 1,
legend.text.size = 0.75 )
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
# deliverable 4  ----------------------------------------------------------
#creating a choropleth map
Cggplot_map <- function(data, var, title, subtitle) {
ggplot(data) +
geom_sf(aes(fill = !!sym(var)), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(title = title,
subtitle = subtitle,
fill = paste(var, "Contributions"),
caption = "Data source: Massachusetts Office of Campaign and Political Finance") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))}
#creating the second interactive map
Ctmap_interactive <- function(data, var, title) {
tm_shape(data) +
tm_polygons(var, palette = "plasma", title = title, alpha = 0.5) -> tmap_chorop
leaflet_map <- tmap_leaflet(tmap_chorop)
leaflet_map |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = data, fillOpacity = 0.5, color = "blue", weight = 1)}
#For credit cards
Cggplot_map(FinalbostonZips, "Credit Card",
"Total Credit Card Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Credit Card", "Credit Card Contributions")
#For checks
Cggplot_map(FinalbostonZips, "Check",
"Total Check Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Check", "Check Contributions")
#Layering and combining maps
leaflet_map2 <- tmap_leaflet(tm_shape(FinalbostonZips) +
tm_polygons("Credit Card", palette = "plasma", title = "Contributions", alpha = 0.5))
leaflet_map2 |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "blue", weight = 1, group = "Credit Card") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "red", weight = 1, group = "Check") |>
addLayersControl(
overlayGroups = c("Credit Card", "Check"),
options = layersControlOptions(collapsed = FALSE)
)
# save del4Draft ----------------------------------------------------------
saveRDS(leaflet_map2, "del4Draft.rds")
saveWidget(leaflet_map2, "del4Draft.html")
library(flexdashboard) # always
readRDS("del1Draft.rds")
readRDS("Option1.rds")
readRDS("del3Draft.rds")
readRDS("del4Draft.rds")
ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
#plotting a choropleth with the average in contributions
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
# save del3Draft ----------------------------------------------------------
#Making an interactive map
tm_shape(FinalbostonZips) +
tm_polygons("Average", palette = "plasma", title = "The Average") +
tm_view(set.view = c(-71.0589, 42.3601, 10)) +
tm_layout(
main.title = "A Map of Average Political Contributions in Boston by Zip Codes",
main.title.size = 1.3,
main.title.position = "center",
title = "For Payment made by Credit Cards & Checks",
title.size = 1,
title.position = c("left", "bottom"),
legend.outside = TRUE,
legend.title.size = 1,
legend.text.size = 0.75 )
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
saveRDS(del3Draft, file = "del3Draft.rds")
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
setwd("~/Documents/UMass - DACSS/Courses/DACSS 690V/DataViz-Dashboard")
readRDS("del3Draft.rds")
#plotting a choropleth with the average in contributions
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "Average Contributions by ZIP Code",
subtitle = "Tender Types: Credit Card and Check",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
# save del3Draft ---------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
# deliverable 4  ----------------------------------------------------------
#creating a choropleth map
Cggplot_map <- function(data, var, title, subtitle) {
ggplot(data) +
geom_sf(aes(fill = !!sym(var)), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(title = title,
subtitle = subtitle,
fill = paste(var, "Contributions"),
caption = "Data source: Massachusetts Office of Campaign and Political Finance") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))}
#creating the second interactive map
Ctmap_interactive <- function(data, var, title) {
tm_shape(data) +
tm_polygons(var, palette = "plasma", title = title, alpha = 0.5) -> tmap_chorop
leaflet_map <- tmap_leaflet(tmap_chorop)
leaflet_map |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = data, fillOpacity = 0.5, color = "blue", weight = 1)}
#For credit cards
Cggplot_map(FinalbostonZips, "Credit Card",
"Total Credit Card Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Credit Card", "Credit Card Contributions")
#For checks
Cggplot_map(FinalbostonZips, "Check",
"Total Check Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Check", "Check Contributions")
#Layering and combining maps
leaflet_map2 <- tmap_leaflet(tm_shape(FinalbostonZips) +
tm_polygons("Credit Card", palette = "plasma", title = "Contributions", alpha = 0.5))
leaflet_map2 |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "blue", weight = 1, group = "Credit Card") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "red", weight = 1, group = "Check") |>
addLayersControl(
overlayGroups = c("Credit Card", "Check"),
options = layersControlOptions(collapsed = FALSE)
)
# save del4Draft ----------------------------------------------------------
saveRDS(leaflet_map2, "del4Draft.rds")
saveWidget(leaflet_map2, "del4Draft.html")
del3Draft
saveRDS(del3Draft, file = "del3Draft.rds")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "A Map of Average Political Contributions in Boston by Zip Codes",
subtitle = "For Payment made by Credit Cards & Checks",
fill = "Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
del3Draft
# save del3Draft ----------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
#plotting a choropleth with the average in contributions
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "A Map of Average Political Contributions in Boston by Zip Codes",
subtitle = "For Payment made by Credit Cards & Checks",
fill = "The Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
del3Draft
# save del3Draft ----------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "A Map of Average Political Contributions in Boston by Zip Codes",
subtitle = "Showing only Payment made by Credit Cards & Checks",
fill = "The Average",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
del3Draft
# save del3Draft ----------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "A Map of Average Political Contributions in Boston by Zip Codes",
subtitle = "Showing only Payment made by Credit Cards & Checks",
fill = "The Average Dollar Amount",
caption = "Data source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
del3Draft
# save del3Draft ----------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
# deliverable 4  ----------------------------------------------------------
#creating a choropleth map
Cggplot_map <- function(data, var, title, subtitle) {
ggplot(data) +
geom_sf(aes(fill = !!sym(var)), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(title = title,
subtitle = subtitle,
fill = paste(var, "Contributions"),
caption = "Data source: Massachusetts Office of Campaign and Political Finance") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))}
#creating the second interactive map
Ctmap_interactive <- function(data, var, title) {
tm_shape(data) +
tm_polygons(var, palette = "plasma", title = title, alpha = 0.5) -> tmap_chorop
leaflet_map <- tmap_leaflet(tmap_chorop)
leaflet_map |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = data, fillOpacity = 0.5, color = "blue", weight = 1)}
#For credit cards
Cggplot_map(FinalbostonZips, "Credit Card",
"Total Credit Card Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Credit Card", "Credit Card Contributions")
#For checks
Cggplot_map(FinalbostonZips, "Check",
"Total Check Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Check", "Check Contributions")
#Layering and combining maps
leaflet_map2 <- tmap_leaflet(tm_shape(FinalbostonZips) +
tm_polygons("Credit Card", palette = "plasma", title = "Contributions", alpha = 0.5))
leaflet_map2 |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "blue", weight = 1, group = "Credit Card") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "red", weight = 1, group = "Check") |>
addLayersControl(
overlayGroups = c("Credit Card", "Check"),
options = layersControlOptions(collapsed = FALSE)
)
# save del4Draft ----------------------------------------------------------
saveRDS(leaflet_map2, "del4Draft.rds")
saveWidget(leaflet_map2, "del4Draft.html")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
##Plotting -------------------------------------------------------------
#plotting a choropleth with the average in contributions
del3Draft <- ggplot(FinalbostonZips) +
geom_sf(aes(fill = Average), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(
title = "A Map of Average Political Contributions in Boston by Zip Codes",
subtitle = "Showing only Payment made by Credit Cards & Checks",
fill = "The Average Dollar Amount",
caption = "Source: Massachusetts Office of Campaign and Political Finance"
) +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))
del3Draft
# save del3Draft ----------------------------------------------------------
#Save the viz
saveRDS(del3Draft, file = "del3Draft.rds")
# deliverable 4  ----------------------------------------------------------
#creating a choropleth map
Cggplot_map <- function(data, var, title, subtitle) {
ggplot(data) +
geom_sf(aes(fill = !!sym(var)), color = "white") +
scale_fill_viridis_c(option = "plasma", na.value = "grey") +
labs(title = title,
subtitle = subtitle,
fill = paste(var, "Contributions"),
caption = "Data source: Massachusetts Office of Campaign and Political Finance") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 40))}
#creating the second interactive map
Ctmap_interactive <- function(data, var, title) {
tm_shape(data) +
tm_polygons(var, palette = "plasma", title = title, alpha = 0.5) -> tmap_chorop
leaflet_map <- tmap_leaflet(tmap_chorop)
leaflet_map |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = data, fillOpacity = 0.5, color = "blue", weight = 1)}
#For credit cards
Cggplot_map(FinalbostonZips, "Credit Card",
"Total Credit Card Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Credit Card", "Credit Card Contributions")
#For checks
Cggplot_map(FinalbostonZips, "Check",
"Total Check Contributions by Zip Code",
"By Zip Code")
Ctmap_interactive(FinalbostonZips, "Check", "Check Contributions")
#Layering and combining maps
leaflet_map2 <- tmap_leaflet(tm_shape(FinalbostonZips) +
tm_polygons("Credit Card", palette = "plasma", title = "Contributions", alpha = 0.5))
leaflet_map2 |>
addProviderTiles("OpenStreetMap") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "blue", weight = 1, group = "Credit Card") |>
addPolygons(data = FinalbostonZips, fillOpacity = 0.5, color = "red", weight = 1, group = "Check") |>
addLayersControl(
overlayGroups = c("Credit Card", "Check"),
options = layersControlOptions(collapsed = FALSE)
)
# save del4Draft ----------------------------------------------------------
saveRDS(leaflet_map2, "del4Draft.rds")
saveWidget(leaflet_map2, "del4Draft.html")
readRDS("del3Draft.rds")
readRDS("del3Draft.rds")
